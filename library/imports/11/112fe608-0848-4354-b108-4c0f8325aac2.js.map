{"version":3,"sources":["assets/script/main.js"],"names":["cc","Class","Component","properties","block1","Prefab","score_Label","Label","bzPrefab","onLoad","prefabList","name","size","color","window","main","f_scale","current_score","director","getPhysicsManager","enabled","node","on","event","mouse_position","getLocation","world_position","convertToNodeSpaceAR","y","randomNum","Math","floor","random","length","createBlock","position","typeNumber","isScale","block_Node","instantiate","setPosition","v2","x","scale","act","scaleTo","runAction","fruit_sprit","getComponent","changeSpriteFrame","block_type","Number","physiscs_collider","PhysicsCircleCollider","fruitItem","filter","item","radius","console","log","parent","createTx","bzNode","Color","tween","to","call","removeFromParent","start","addScore","string"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n  extends: cc.Component,\n\n  properties: {\n    block1: cc.Prefab,\n    score_Label: cc.Label,\n    bzPrefab: cc.Prefab\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad () {\n    this.prefabList = [{\n      name: 'block1',\n      size: 26,\n      color: [110,16,100]\n    },\n    {\n      name: 'block2',\n      size: 40,\n      color: [255,9,36]\n    },\n    {\n      name: 'block3',\n      size: 54,\n      color: [253,11,1]\n    },\n    {\n      name: 'block4',\n      size: 59,\n      color: [255,230,23]\n    },\n    {\n      name: 'block5',\n      size: 76,\n      color: [110,16,100]\n    },\n    {\n      name: 'block6',\n      size: 91,\n      color: [110,16,100]\n    },\n    {\n      name: 'block7',\n      size: 96,\n      color: [110,16,100]\n    },\n    {\n      name: 'block8',\n      size: 129,\n      color: [110,16,100]\n    },\n    {\n      name: 'block9',\n      size: 154,\n      color: [110,16,100]\n    },\n    {\n      name: 'block10',\n      size: 154,\n      color: [110,16,100]\n    },\n    {\n      name: 'block11',\n      size: 204,\n      color: [110,16,100]\n    }]\n\n    window.main = this\n    this.f_scale = 0.8 // 整体缩小0.8\n\n    this.current_score = 0\n\n    cc.director.getPhysicsManager().enabled = true;\n\n    this.node.on('touchstart', (event) => {\n      let mouse_position = event.getLocation()\n      let world_position = this.node.convertToNodeSpaceAR(mouse_position)\n      world_position.y = 500\n      let randomNum = Math.floor(Math.random() * (this.prefabList.length - 5))\n\n      this.createBlock(world_position, randomNum)\n    })\n  },\n\n  // create block\n  createBlock (position, typeNumber, isScale=false) {\n    if (typeNumber >= this.prefabList.length) {\n      typeNumber = this.prefabList.length\n    }\n    let block_Node = cc.instantiate(this.block1)\n    block_Node.setPosition(cc.v2(position.x, position.y))\n\n    block_Node.scale = this.f_scale\n\n    if(isScale) {\n      block_Node.scale = 0.3\n      let act = cc.scaleTo(0.15, this.f_scale)\n      block_Node.runAction(act)\n      // cc.tween(block_Node).to(0.15, {scale: 1})\n    }\n\n    let fruit_sprit = block_Node.getComponent('block')\n    // 调用block.js方法修改sprite frame图片\n    fruit_sprit.changeSpriteFrame(typeNumber)\n    block_Node.block_type = 'block' + Number(typeNumber + 1)\n\n    let physiscs_collider = block_Node.getComponent(cc.PhysicsCircleCollider)\n    let fruitItem = this.prefabList.filter((item) => {\n      return item.name == block_Node.block_type\n    })\n\n    physiscs_collider.radius = fruitItem[0].size\n    console.log(typeNumber, fruitItem[0]);\n\n    block_Node.parent = this.node\n  },\n  createTx(position, typeNumber){\n    let bzNode = cc.instantiate(this.bzPrefab)\n    bzNode.setPosition(cc.v2(position.x, position.y))\n    bzNode.parent = this.node\n    bzNode.scale = 0\n\n    let fruitItem = this.prefabList.filter((item) => {\n      return item.name == 'block' + Number(typeNumber + 1)\n    })\n\n    bzNode.color = new cc.Color(fruitItem[0].color[0],fruitItem[0].color[1],fruitItem[0].color[2])\n\n    cc.tween(bzNode).to(0.1, {scale:0.2}).call(()=>{\n      bzNode.removeFromParent()\n    }).start()\n  },\n  addScore(){\n    this.current_score += 1\n    this.score_Label.string = this.current_score\n  }\n});\n"]}