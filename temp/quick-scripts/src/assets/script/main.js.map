{"version":3,"sources":["assets/script/main.js"],"names":["cc","Class","Component","properties","block1","Prefab","score_Label","Label","onLoad","prefabList","name","size","window","main","f_scale","current_score","director","getPhysicsManager","enabled","node","on","event","mouse_position","getLocation","world_position","convertToNodeSpaceAR","y","randomNum","Math","floor","random","length","createBlock","position","typeNumber","block_Node","instantiate","setPosition","v2","x","fruit_sprit","getComponent","changeSpriteFrame","block_type","Number","physiscs_collider","PhysicsCircleCollider","filter","item","radius","console","log","parent","addScore","string"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n  extends: cc.Component,\n\n  properties: {\n    block1: cc.Prefab,\n    score_Label: cc.Label\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad () {\n    this.prefabList = [{\n      name: 'block1',\n      size: 26\n    },\n    {\n      name: 'block2',\n      size: 40\n    },\n    {\n      name: 'block3',\n      size: 54\n    },\n    {\n      name: 'block4',\n      size: 59\n    },\n    {\n      name: 'block5',\n      size: 76\n    },\n    {\n      name: 'block6',\n      size: 91\n    },\n    {\n      name: 'block7',\n      size: 96\n    },\n    {\n      name: 'block8',\n      size: 129\n    },\n    {\n      name: 'block9',\n      size: 154\n    },\n    {\n      name: 'block10',\n      size: 154\n    },\n    {\n      name: 'block11',\n      size: 204\n    }]\n\n    window.main = this\n    this.f_scale = 0.8 // 整体缩小0.8\n\n    this.current_score = 0\n\n    cc.director.getPhysicsManager().enabled = true;\n\n    this.node.on('touchstart', (event) => {\n      let mouse_position = event.getLocation()\n      let world_position = this.node.convertToNodeSpaceAR(mouse_position)\n      world_position.y = 500\n      let randomNum = Math.floor(Math.random() * (this.prefabList.length - 5))\n\n      this.createBlock(world_position, randomNum)\n    })\n  },\n\n  // create block\n  createBlock (position, typeNumber) {\n    if (typeNumber >= this.prefabList.length) {\n      typeNumber = this.prefabList.length\n    }\n    let block_Node = cc.instantiate(this.block1)\n    block_Node.setPosition(cc.v2(position.x, position.y))\n    block_Node.f_scale = 0.8 \n\n    let fruit_sprit = block_Node.getComponent('block')\n    // 调用block.js方法修改sprite frame图片\n    fruit_sprit.changeSpriteFrame(typeNumber)\n    block_Node.block_type = 'block' + Number(typeNumber + 1)\n\n    let physiscs_collider = block_Node.getComponent(cc.PhysicsCircleCollider)\n    let size = this.prefabList.filter((item) => {\n      return item.name == block_Node.block_type\n    })\n\n    physiscs_collider.radius = size[0].size\n    console.log(typeNumber, size[0]);\n\n    block_Node.parent = this.node\n  },\n  addScore(){\n    this.current_score += 1\n    this.score_Label.string = this.current_score\n  }\n});\n"]}